!function(){"use strict";angular.module("dowser",["ngAnimate","ui.router","ui.ace","ngMaterial","toastr","ngStorage"])}(),function(){"use strict";function t(){function t(t){return{id:"ValueAxis-"+t,axisThickness:0,gridCount:0,gridThickness:0,ignoreAxisWidth:!0,labelsEnabled:!1}}return t}angular.module("dowser").factory("AmChartValueAxe",t)}(),function(){"use strict";function t(t){function e(){return{type:"serial",colors:t.linesColorPallet,creditsPosition:"bottom-right",categoryField:"date",dataDateFormat:"YYYY-MM-DD",angle:21,addClassNames:!0,fontFamily:"sans-serif",fontSize:13,theme:"dark",categoryAxis:{boldPeriodBeginning:!1,firstDayOfWeek:0,parseDates:!0,axisThickness:0,gridThickness:1,dashLength:t.dashLength,equalSpacing:!0,guides:[{date:moment().format("YYYY-MM-DD"),lineColor:"#CCCCCC",lineAlpha:.3,lineThickness:2,dashLength:t.dashLength}]},chartCursor:{enabled:!0,balloonPointerOrientation:"horizontal",cursorPosition:"mouse",bulletSize:5,animationDuration:.3,categoryBalloonDateFormat:"MMM DD",graphBulletSize:0},trendLines:[],guides:[],allLabels:[],balloon:{},legend:{enabled:!0,useGraphSettings:!0,valueText:""},titles:[]}}return e}t.$inject=["AmChartFormats"],angular.module("dowser").factory("AmChartSerial",t)}(),function(){"use strict";function t(t,e){function a(t){this.results={},this.today=moment().startOf("day"),this.__dates=[],this.__unparsedData=t}return a.prototype.__createResultDates=function(){var t=this;t.__unparsedData.forEach(function(e){e.data.forEach(function(e){t.__dates.push(e.date)})});var e=moment(Math.max.apply(null,t.__dates)),a=moment(Math.min.apply(null,t.__dates));moment.range(a,e).by("hours",function(e){t.results[e.format("YYYY-MM-DD")]={date:e}})},a.prototype.__convertDate=function(t){return moment(t).startOf("day")},a.prototype.__convertAllDates=function(){var t=this;this.__unparsedData.forEach(function(e){e.data.forEach(function(e){e.date=t.__convertDate(e.date)})})},a.prototype.__formatResultDates=function(){this.results.forEach(function(t){t.date=t.date.format("YYYY-MM-DD")})},a.prototype.__getResultIndexByDate=function(t){for(var e=0;e<this.results.length;e+=1)if(this.results[e].date.isSame(t))return e},a.prototype.__buildResults=function(){var t=this;t.__unparsedData.forEach(function(a){a.data.forEach(function(r){var n=r.date.format("YYYY-MM-DD");t.results[n][a.category]?t.results[n][a.category]+=r.value:t.results[n][a.category]=r.value,r.date.diff(t.today)>=0&&(t.results[n].dashLength=e.dashLength)})})},a.prototype.__convertResultsToArray=function(){var t=this;t.results=Object.keys(t.results).map(function(e){return t.results[e]})},a.prototype.parse=function(){var t=this;return t.__createResultDates(),t.__convertAllDates(),t.__buildResults(),t.__convertResultsToArray(),t.__formatResultDates(),t.results},a}t.$inject=["$filter","AmChartFormats"],angular.module("dowser").factory("AmChartParser",t)}(),function(){"use strict";function t(t,e,a,r,n){function o(t,o){var i=new e;return i.valueAxes=[],i.graphs=[],o.forEach(function(t,e){i.valueAxes.push(new a(e)),i.graphs.push(new r(t,e))}),i.dataProvider=new n(o).parse(),i}return o}t.$inject=["ChartDataMock","AmChartSerial","AmChartValueAxe","AmChartGraph","AmChartParser"],angular.module("dowser").factory("AmChartOptions",t)}(),function(){"use strict";function t(t,e,a,r,n,o){function i(t,i){var s=new e;return s.valueAxes=[],s.graphs=[],s.valueAxes.push(new a(1)),s.graphs.push(new r(i,1)),delete s.legend,delete s.chartCursor,s.colors=o.linesColorPallet,s.categoryAxis.labelsEnabled=!1,s.categoryAxis.gridThickness=0,s.categoryAxis.dashLength=0,s.categoryAxis.gridAlpha=0,s.categoryAxis.axisAlpha=0,s.balloon={borderAlpha:0,borderThickness:0,fillAlpha:0,fontSize:0},s.graphs[0].bulletSize=9,s.graphs[0].lineThickeness=2,angular.isArray(i)||(i=[i]),s.dataProvider=new n([i[0]]).parse(),s}return i}t.$inject=["ChartDataMock","AmChartSerial","AmChartValueAxe","AmChartGraph","AmChartParser","AmChartFormats"],angular.module("dowser").factory("AmChartMiniOptions",t)}(),function(){"use strict";function t(t){function e(t){this.__realData=t[0],this.__realDataCategory=this.__realData.category,this.__realDataUnit=this.__realData.unit,this.__mergeWith=t.slice(1)}return e.prototype.__destructureData=function(t){t.data.sort(function(t,e){return t.date.valueOf()-e.date.valueOf()});var e=t.data.map(function(t){return t.date}),a=t.data.map(function(t){return t.value});return{dates:e,values:a}},e.prototype.__structureData=function(t){for(var e={dates:this.__realData.dates,values:t},a={category:"Merged "+this.__realDataCategory,unit:this.__realDataUnit,data:[]},r=0;r<e.dates.length;r+=1)a.data[r]={date:e.dates[r],value:e.values[r]};return a},e.prototype.__removeBeforeToday=function(t){for(var e=moment().startOf("day"),a={dates:[],values:[]},r=0;r<t.dates.length;r+=1)t.dates[r].diff(e)>=0&&(a.dates.push(t.dates[r]),a.values.push(t.values[r]));return a},e.prototype.get=function(e){var a=this;if(!(a.__mergeWith.length<1)){a.__realData=a.__destructureData(a.__realData),a.__mergeWith=a.__mergeWith.map(function(t){return a.__destructureData(t)}),a.__realData=a.__removeBeforeToday(this.__realData),a.__mergeWith=a.__mergeWith.map(function(t){return a.__removeBeforeToday(t)});var r=a.__realData.values,n=a.__mergeWith.map(function(t){return t.values});return t.merge({realData:r,mergeWith:n||[]}).then(function(t){var r=t.data.map(function(t){return Math.round(t)});r=a.__structureData(r),e(r)}),a.dataStore}},e}t.$inject=["Api"],angular.module("dowser").factory("AmChartMerge",t)}(),function(){"use strict";function t(){function t(t,e){return{balloonText:"[[value]]"+(t.unit||"un"),bullet:"round",dashLengthField:"dashLength",id:"AmGraph-"+e,lineAlpha:1,bulletSize:10,bulletBorderAlpha:1,bulletBorderColor:"#455A64",lineThickness:3,markerType:"square",title:t.category,valueAxis:"ValueAxis-"+e,valueField:t.category}}return t}angular.module("dowser").factory("AmChartGraph",t)}(),function(){"use strict";angular.module("dowser").constant("AmChartFormats",{date:"MMM DD",dashLength:6,linesColorPallet:["#de4c4f","#d8854f","#eea638","#a7a737","#86a965","#8aabb0","#69c8ff","#cfd27e","#9d9888","#916b8a","#724887","#7256bc"]})}(),function(){"use strict";function t(){function t(t){t||(t=[]),angular.isArray(t)||(t=[t]),this.data=t}return t.prototype.get=function(){return this.data},t.prototype.__toggle=function(t){var e;this.data.every(function(a,r){return a.id!==t.id||function(){e=r}()}),e?this.data.splice(e,1):this.data.push(t)},t.prototype.toggle=function(t){angular.isArray(t)?t.forEach(function(t){this.__toggle(t)}):this.__toggle(t)},t.prototype.addOnFirst=function(t){this.data.unshift(t)},t}angular.module("dowser").factory("AmChartDataStore",t)}(),function(){"use strict";function t(t,e,a){var r=this;r.id="007",r.username="james",r.myData=[],r.notMyData=[],r.loadData=function(){return new t(function(n){var o=[];o.push(a.get("DataType/GetByUser/"+r.username)),o.push(a.get("DataType/GetByNotUser/"+r.username)),t.all(o).then(function(t){r.myData=t[0].data,r.notMyData=t[1].data.shuffle().slice(0,6),n()})["catch"](e.error)})}}t.$inject=["$q","$log","Api"],angular.module("dowser").service("User",t)}(),function(){"use strict";function t(){function t(t){particlesJS(t,{particles:{number:{value:80,density:{enable:!0,value_area:800}},color:{value:"#ffffff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:5},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:3,random:!0,anim:{enable:!1,speed:40,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:150,color:"#ffffff",opacity:.4,width:1},move:{enable:!0,speed:4,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!0,mode:"grab"},onclick:{enable:!0,mode:"push"},resize:!0},modes:{grab:{distance:140,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0})}return{start:t}}angular.module("dowser").factory("Particles",t)}(),function(){"use strict";function t(){function t(){for(var t=[],a=0;n>a;a++){var r=e(a);t.push(r)}return t}function e(t){var e={};return e.date=a(t),e.value=r(1,100),e}function a(t){var e=moment(),a=e.clone().subtract(n-t,"days");return+moment(a)}function r(t,e){return Math.floor(Math.random()*e+t)}var n=30;return{generate:t}}angular.module("dowser").factory("DataGenerator",t)}(),function(){"use strict";function t(t,e){function a(t,e){return{id:e,category:t.name,unit:t.kind,data:t.points.map(function(t){return{date:t.date,value:Math.round(Number(t.value))}})}}function r(r){e.get("DataType/Get/"+r).then(function(e){var n=a(e.data,r);t.$emit("chart:"+r+":load",n)})}function n(r,n){e.get("DataType/Get/"+n).then(function(e){var o=a(e.data,n);t.$emit("chart:"+r+":load",o)})}return{load:r,loadOn:n}}t.$inject=["$rootScope","Api"],angular.module("dowser").factory("ChartData",t)}(),function(){"use strict";function t(){function t(t,e){return Math.floor(Math.random()*(e-t))+t}function e(e){var r=[{category:"My Sells",unit:"k",data:[{date:1455365898e3,value:124},{date:1455452328e3,value:225},{date:1455538746e3,value:223},{date:1455625156e3,value:125},{date:1455711569e3,value:206},{date:1455711574e3,value:126},{date:1455797998e3,value:228},{date:1455884411e3,value:128},{date:1455974425e3,value:129},{date:1456057242e3,value:130},{date:1456143657e3,value:30},{date:1456230069e3,value:132},{date:1456316481e3,value:133},{date:1456402893e3,value:231},{date:1456489323e3,value:233},{date:1456575735e3,value:122},{date:1456667562060,value:341}]},{category:"Ice Cream Sells",data:[{date:1455365898e3,value:t(50,380)},{date:1455452328e3,value:t(50,380)},{date:1455538746e3,value:t(50,380)},{date:1455625156e3,value:t(50,380)},{date:1455711574e3,value:t(50,380)},{date:1455797998e3,value:t(50,380)},{date:1455884411e3,value:t(50,380)},{date:1455974425e3,value:t(50,380)},{date:1456057242e3,value:t(50,380)},{date:1456143657e3,value:t(50,380)},{date:1456230069e3,value:t(50,380)},{date:1456316481e3,value:t(50,380)},{date:1456402893e3,value:t(50,380)},{date:1456489323e3,value:t(50,380)},{date:1456575735e3,value:t(50,380)},{date:1456667562060,value:t(50,380)}]},{category:"Weather",unit:"ºC",data:[{date:1455365898e3,value:t(14,33)},{date:1455452328e3,value:t(14,33)},{date:1455538746e3,value:t(14,33)},{date:1455625156e3,value:t(14,33)},{date:1455711574e3,value:t(14,33)},{date:1455797998e3,value:t(14,33)},{date:1455884411e3,value:t(14,33)},{date:1455974425e3,value:t(14,33)},{date:1456057242e3,value:t(14,33)},{date:1456143657e3,value:t(14,33)},{date:1456230069e3,value:t(14,33)},{date:1456316481e3,value:t(14,33)},{date:1456402893e3,value:t(14,33)},{date:1456489323e3,value:t(14,33)},{date:1456575735e3,value:t(14,33)},{date:1456667562060,value:t(14,33)}]}];return e?(r=r.filter(function(t){return t.category===e})[0],r.category=r.category+" "+ ++a,r):r}var a=0;return{get:e}}angular.module("dowser").factory("ChartDataMock",t)}(),function(){"use strict";function t(t,e,a){function r(e){return new Promise(function(r){a.info("Getting: "+s+e),t(r,2e3)})}function n(t){return e.get(s+t)}function o(t,a){return e.post(s+t,a)}function i(t){return e.post(d,t)}var s="http://158.85.206.13:8081/",d="http://158.85.199.5:8002";return{__get:r,get:n,post:o,merge:i}}t.$inject=["$timeout","$http","$log"],angular.module("dowser").factory("Api",t)}(),function(){"use strict";function t(){function t(t,e,a,r,n,o){var i=this;i.chartId="chart-"+i.identifier,i.dataStore=new n,i.renderChart=function(){if(AmCharts.isReady){var t=new r(i.identifier,i.dataStore.get());return AmCharts.makeChart(i.chartId,t)}AmCharts.ready(i.renderChart)},i.loadEvent=e.$on("chart:"+i.identifier+":load",function(t,e){i.dataStore.toggle(e),a(i.renderChart)}),i.mergeEvent=e.$on("chart:"+i.identifier+":merge",function(){var t=angular.copy(i.dataStore.get());new o(t).get(function(t){i.dataStore.addOnFirst(t),a(i.renderChart)})})}t.$inject=["$scope","$rootScope","$timeout","AmChartOptions","AmChartDataStore","AmChartMerge"];var e={restrict:"E",templateUrl:"app/components/chart/chart.html",scope:{identifier:"@"},controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("dowser").directive("chart",t)}(),function(){"use strict";function t(){function t(t,e,a){var r=this;r.chartId="chart-"+r.identifier,r.renderChart=function(t){if(AmCharts.isReady){var e=new a(r.identifier,t);return AmCharts.makeChart(r.chartId,e)}AmCharts.ready(r.renderChart)},r.event=t.$on("chart:"+r.identifier+":load",function(t,a){e(function(){r.renderChart(a)})})}t.$inject=["$rootScope","$timeout","AmChartMiniOptions"];var e={restrict:"E",templateUrl:"app/components/chart/chart-mini.html",scope:{identifier:"@"},controller:t,controllerAs:"vm",bindToController:!0};return e}angular.module("dowser").directive("chartMini",t)}(),function(){"use strict";function t(t,e){var a=this;a.progress=!1,a.progressClass="progress-hide",a.event=t.$on("wizard:progress",function(){a.progress=!a.progress,a.progressClass=a.progress?"progress-show":"progress-hide"}),e.go("wizard.register")}t.$inject=["$rootScope","$state"],angular.module("dowser").controller("WizardController",t)}(),function(){"use strict";function t(t,e,a,r){function n(){t.$emit("wizard:progress"),a.go("wizard.importer",o.data)}var o=this;o.data={name:void 0,kind:void 0,userId:r.username},o.next=function(){t.$emit("wizard:progress"),e(n,500)}}t.$inject=["$rootScope","$timeout","$state","User"],angular.module("dowser").controller("RegisterController",t)}(),function(){"use strict";function t(t,e,a){var r=this;a.start("particles-js"),r.getStarted=function(){e(function(){t.go("wizard.register")},500)}}t.$inject=["$state","$timeout","Particles"],angular.module("dowser").controller("MainController",t)}(),function(){"use strict";function t(t,e,a,r,n,o){function i(){var e=r;e.points=d(l.data.points),t.$emit("wizard:progress"),a.go("wizard.agreement",{data:e})}function s(t){var e=angular.toJson(t,2);return u.concat(e)}function d(t){var e=t.replace(u,"");return angular.fromJson(e)}var l=this,u="// This is just an Example data\n",c=o.generate();l.data={points:s(c)},l.aceSettings={showGutter:!1,theme:"twilight",mode:"json",firstLineNumber:5},l.next=function(){t.$emit("wizard:progress"),e(i,500)}}angular.module("dowser").controller("ImporterController",t),t.$inject=["$rootScope","$timeout","$state","$stateParams","Api","DataGenerator"]}(),function(){"use strict";function t(t,e,a,r,n){var o=this;o.inputSearch="",o.mainChart={},o.chartList=[],o.comparableCharts=[],o.loadMyChart=function(){a.load(o.mainChart.id)},o.loadComparableCharts=function(){o.comparableCharts.forEach(function(e,r){t(function(){a.load(e.id)},3e3*r)})},o.addNewChart=function(){t(function(){e.go("wizard.register")},500)},o.setMainChart=function(e){o.mainChart=!1,t(function(){o.mainChart=e,o.loadMyChart()},500)},o.createMerge=function(){n.$emit("chart:"+o.mainChart.id+":merge")},o.addChart=function(t){a.loadOn(o.mainChart.id,t.id)},o.initialize=function(){r.loadData().then(function(){o.chartList=r.myData,o.comparableCharts=r.notMyData,o.mainChart=o.chartList[0],o.loadMyChart(),o.loadComparableCharts()})},o.initialize()}t.$inject=["$timeout","$state","ChartData","User","$rootScope"],angular.module("dowser").controller("DashboardController",t)}(),function(){"use strict";function t(t,e,a,r,n,o){function i(e){return function(){t.$emit("wizard:progress"),a(e,500)}}var s=this;s.accept=i(function(){o.post("DataType/Insert",r.data).then(function(){t.$emit("wizard:progress"),e.go("dashboard")})["catch"](n.error)}),s.deny=i(function(){t.$emit("wizard:progress"),e.go("main")})}t.$inject=["$rootScope","$state","$timeout","$stateParams","$log","Api"],angular.module("dowser").controller("AgreementController",t)}(),function(){"use strict";function t(){}angular.module("dowser").run(t)}(),function(){"use strict";function t(t,e){t.state("main",{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).state("wizard",{url:"/wizard",templateUrl:"app/wizard/wizard.html",controller:"WizardController",controllerAs:"wizard"}).state("wizard.register",{templateUrl:"app/register/register.html",controller:"RegisterController",controllerAs:"register"}).state("wizard.importer",{params:{name:void 0,kind:void 0,userId:"user"},templateUrl:"app/importer/importer.html",controller:"ImporterController",controllerAs:"importer"}).state("wizard.agreement",{params:{data:{}},templateUrl:"app/agreement/agreement.html",controller:"AgreementController",controllerAs:"agreement"}).state("dashboard",{params:{data:{}},url:"/dashboard",templateUrl:"app/dashboard/dashboard.html",controller:"DashboardController",controllerAs:"dashboard"}),e.otherwise("/")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("dowser").config(t)}(),function(){"use strict";angular.module("dowser").constant("malarkey",malarkey).constant("moment",moment)}(),function(){"use strict";function t(t,e){t.debugEnabled(!0),e.allowHtml=!0,e.timeOut=3e3,e.positionClass="toast-top-right",e.preventDuplicates=!0,e.progressBar=!0,Array.prototype.shuffle=function(){var t,e,a=this.length;if(0==a)return this;for(;--a;)t=Math.floor(Math.random()*(a+1)),e=this[a],this[a]=this[t],this[t]=e;return this}}t.$inject=["$logProvider","toastrConfig"],angular.module("dowser").config(t)}(),angular.module("client").run(["$templateCache",function(t){t.put("app/agreement/agreement.html",'<div class="agreement"><h3 class="agreement-title md-display-2">Do you accept to share your data?</h3><p class="agreement-description md-headline">If you accept you will have access for data from other users.</p><md-button ng-click="agreement.accept()" class="md-raised md-primary wizard-button">Accept</md-button><md-button ng-click="agreement.deny()" class="md-raised md-warn wizard-button">Deny</md-button></div>'),t.put("app/dashboard/dashboard.html",'<div class="dashboard full-screen dark-theme"><div class="sidebar"><h1 class="logo">Dowser</h1><div class="charts"><div class="chart-features"><md-button ng-click="dashboard.addNewChart()" class="md-raised md-primary">Add Chart</md-button></div><ul class="chart-list"><li class="chart-item" ng-repeat="chartItem in dashboard.chartList track by $index" ng-click="dashboard.setMainChart(chartItem)" ng-class="dashboard.mainChart.id === chartItem.id ? \'chart-item-active\' : \'\'">{{ chartItem.name }}</li></ul></div></div><div class="content"><div class="chart-tools"><h2 class="md-headline">{{ dashboard.mainChart.name }}</h2><md-button ng-click="dashboard.createMerge()" class="md-raised md-accent">Create Merge Line</md-button></div><chart ng-if="dashboard.mainChart.id" identifier="{{ dashboard.mainChart.id }}"></chart><h3 class="md-title">Comparable Charts<div class="comparable-charts"><div ng-repeat="comparableChartItem in dashboard.comparableCharts" class="comparable-chart-item"><h4 class="md-subhead">{{ comparableChartItem.name }}</h4><chart-mini class="chart-mini-container" ng-class="" ng-click="dashboard.addChart(comparableChartItem)" identifier="{{ comparableChartItem.id }}"></chart-mini></div></div></h3></div></div>'),t.put("app/importer/importer.html",'<p class="instructions">Add initial data to create your chart.</p><div class="input-ace" ng-model="importer.data.points" ui-ace="importer.aceSettings"></div><md-button ng-click="importer.next()" class="md-raised md-primary wizard-button">Save</md-button>'),t.put("app/main/main.html",'<div class="main full-screen dark-theme"><div id="particles-js"></div><div class="header"><h1 class="logo">Dowser</h1></div><div class="content content-flex"><div class="opening"><h2 class="opening-title md-display-1">Data prediction for Humans</h2><p class="opening-description md-subhead">Analyze data and predict future outcomes using a simple interface. Compare with real data to understand the trend of your business.</p><md-button class="opening-button md-primary md-raised" ng-click="main.getStarted()">Get started</md-button></div></div><div class="footer">Created with<3 by="" humans="" <="" div=""></3></div></div>'),t.put("app/register/register.html",'<p class="instructions">Complete the form to create the data structure for the creation of your chart.</p><form name="registerForm"><md-input-container><label>Data name</label> <input required="" ng-model="register.data.name" autocomplete="off" md-placeholder="Weather"><div class="input-hint">Ex: Weather</div></md-input-container><md-input-container><label>Unit</label> <input required="" ng-model="register.data.kind" autocomplete="off" md-placeholder="ºF"><div class="input-hint">Ex: ºF</div></md-input-container><md-button ng-click="!registerForm.$valid || register.next()" class="md-raised md-primary wizard-button">Save</md-button></form>'),t.put("app/wizard/wizard.html",'<md-progress-linear class="progress" ng-class="wizard.progressClass" md-mode="indeterminate"></md-progress-linear><div class="wizard full-screen light-theme"><div class="header"><h1 class="logo">Dowser</h1></div><div class="content"><div class="wizard-view" ui-view=""></div></div><div class="footer">Created with<3 by="" humans="" <="" div=""></3></div></div>'),t.put("app/components/chart/chart-mini.html",'<div id="{{ vm.chartId }}" class="chart-mini"><md-progress-circular class="md-warn" md-mode="indeterminate"></md-progress-circular></div>'),t.put("app/components/chart/chart.html",'<div id="{{ vm.chartId }}" class="chart"><md-progress-circular class="md-warn" md-mode="indeterminate"></md-progress-circular></div>')}]);
//# sourceMappingURL=../maps/scripts/app-5ee489d27b.js.map
